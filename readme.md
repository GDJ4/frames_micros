# Отчёт по заданию

**Микросервисная архитектура системы управления задачами для строительных объектов
ООО «СистемаКонтроля»**

**Лазарев Г.С., ЭФБО-10-23**

---

## 1. Постановка задачи и исходные данные

В качестве исходной точки был рассмотрен упрощённый вариант серверной части, реализованный в виде нескольких изолированных сервисов без единого стандарта взаимодействия и механизмов защиты. Архитектура не обеспечивала должного уровня безопасности, масштабируемости и прозрачности работы между компонентами.

Основной задачей работы стало проектирование и реализация микросервисного бэкенда, ориентированного на практическое использование в системе управления задачами на строительных объектах, с учётом требований к безопасности, расширяемости и удобству сопровождения.

**Цель работы** — реализовать микросервисную систему на языке Go, включающую API-шлюз и бизнес-сервисы, унифицировать взаимодействие между ними и обеспечить корректную аутентификацию пользователей.

---

## 2. Реализация микросервисной архитектуры

В ходе выполнения задания система была переработана и реализована на языке **Go**, с разделением ответственности между отдельными сервисами.

### Основные реализованные компоненты:

* **API Gateway** — единая точка входа для клиентских запросов
* **Сервис пользователей** — отвечает за регистрацию, аутентификацию и хранение данных пользователей
* **Сервис задач (заказов)** — управляет задачами, связанными с конкретным пользователем

### Ключевые технические решения:

1. **Аутентификация на основе JWT**
   В сервисе пользователей реализованы HTTP-эндпоинты для регистрации и входа. Пароли пользователей сохраняются в хешированном виде. После успешной аутентификации клиенту выдается JWT-токен, используемый для дальнейших запросов.

2. **Централизованная проверка доступа**
   В API Gateway добавлен middleware, выполняющий валидацию JWT. После проверки идентификатор пользователя извлекается из токена и передается во внутренние сервисы через HTTP-заголовки.

3. **Разграничение доступа к данным**
   Сервис задач обрабатывает запросы только в контексте пользователя, идентификатор которого был получен от шлюза. Это исключает возможность доступа к чужим данным.

4. **Повышение отказоустойчивости**
   В шлюзе реализованы механизмы ограничения частоты запросов, что снижает риск перегрузки системы и элементарных атак на сервисы.

5. **Корреляция запросов**
   Для каждого входящего запроса формируется уникальный идентификатор, передаваемый между сервисами, что упрощает анализ логов и отладку распределённой системы.

---

## 3. Тестирование и описание API

### Документация API

Для системы была подготовлена спецификация интерфейсов в формате **OpenAPI 3.0**, содержащая описание всех доступных маршрутов, структур данных и возможных ответов. Спецификация размещена в файле `openapi.yml` и может быть использована для генерации клиентского кода и тестирования.

### Проверка работоспособности

Функциональность системы проверялась вручную с использованием утилиты `curl`. Для этого был составлен отдельный документ с последовательностью запросов, позволяющих проверить весь основной пользовательский сценарий: от регистрации до работы с задачами.

---

## 4. Результаты тестирования

В процессе тестирования были подтверждены следующие сценарии:

1. Успешная регистрация нового пользователя
<img width="2283" height="277" alt="image" src="https://github.com/user-attachments/assets/f10fa82f-3379-47af-8725-bd1c75d64fc0" />

2. Корректная обработка попытки повторной регистрации
<img width="1462" height="310" alt="image" src="https://github.com/user-attachments/assets/03b83048-ef8b-45c6-b8e8-035507796604" />

3. Получение JWT-токена при аутентификации
<img width="1462" height="310" alt="image" src="https://github.com/user-attachments/assets/5265fbae-161d-4235-84ac-f42f5be1e063" />

4. Блокировка доступа к защищённым маршрутам без токена
<img width="1509" height="313" alt="image" src="https://github.com/user-attachments/assets/b99f9f11-8264-4b5d-8655-e32e3e75b830" />

5. Доступ к пользовательским данным при наличии валидного JWT
<img width="1172" height="188" alt="image" src="https://github.com/user-attachments/assets/0baae682-6473-4f0c-a20c-b1009e13cb27" />

6. Создание новой задачи от имени авторизованного пользователя
<img width="1663" height="124" alt="image" src="https://github.com/user-attachments/assets/bdd14769-5a44-4a1c-9383-a1527de0bc35" />

7. Получение списка задач текущего пользователя
<img width="1657" height="137" alt="image" src="https://github.com/user-attachments/assets/a5b60559-5b09-4fc7-8a87-160c966e0acc" />


Во всех перечисленных случаях сервер возвращал ожидаемые HTTP-статусы и корректные данные, что подтверждает правильность реализации бизнес-логики и механизмов безопасности.

---

## 5. Выводы

В рамках данной работы была спроектирована и реализована микросервисная система на языке Go, соответствующая базовым требованиям к современным распределённым приложениям. Использование API Gateway позволило централизовать контроль доступа, а применение JWT обеспечило безопасную аутентификацию пользователей.

Полученная архитектура может быть расширена дополнительными сервисами и интегрирована с внешними системами, что делает её пригодной для дальнейшего развития и практического применения.

---
